1. Visual & UX Improvements (Alien-Level Cleanliness)**

Below is a simple visualization of how your UI could evolve:

```
--------------------------------------------------------------
|  KPI BAR: Listings | Views | Inquiries | Earnings | Alerts |
--------------------------------------------------------------

 Quick Actions (horizontal + icon emphasis):
 [ + Add Property ]  [ ðŸ“„ My Listings ]  [ ðŸ’¬ Messages ] [ âš™ Subscription ]

--------------------------------------------------------------------
| Engagement Heatmap | Most Viewed | Most Liked | Viewer Timeline |
--------------------------------------------------------------------

 PROPERTY PERFORMANCE GRAPH (Monthly)
------------------------------------------------------------
|   â€¢ Listing traffic trend (line graph)                   |
|   â€¢ Inquiry-to-conversion ratio                         |
|   â€¢ Popular locations heatmap                            |
------------------------------------------------------------
```

### **Why?**

Your UI is already clean, but itâ€™s *flat*. Agents need **action-bias** and **fast scanning**.
A KPI bar at the top instantly tells the agent whether their portfolio is alive or dead.

---

# ðŸ§  **2. Make the Dashboard Smart, Not Just Pretty**

Right now itâ€™s showing numbers. Numbers donâ€™t make money â€” **direction does**.

Add **AI-driven metrics**:

### **ðŸ”® Predictive Insights**

* *â€œThis listing may get fewer views next week â€” consider boosting it.â€*
* *â€œProperties in Arusha city center have 12% more inquiry probability.â€*

### **ðŸŽ¯ Lead Scoring**

* Score inquiries by:

  * user activity
  * message detail
  * viewing frequency
  * device type
  * time of day

### **ðŸ“ˆ Performance Anomalies**

* *â€œYour listing rtyui suddenly jumped +200% in views today.â€*

This turns your platform from â€œdashboardâ€ â†’ **assistant for the agent**.

---

# âš™ï¸ **3. Functional Upgrades That Agents Will Feel**

### **ðŸ”— One-tap deep actions**

Example:

* â€œAdd Propertyâ€ â†’ should include quick templates (house, land, apartment, commercial)
* â€œMessagesâ€ â†’ show unread count on sidebar
* â€œMy Propertiesâ€ â†’ show active/pending/rejected badges

### **ðŸ“¡ Real-time insights**

Use WebSockets for:

* new inquiries
* new likes
* new viewers
* earnings updates

Real estate agents love movement â€” it feels like progress.

---

# ðŸ§¬ **4. Data Visualization: Minimal but High-Value**

Here are the top graphs you must add:

### **1. Listing Traffic Trend**

A simple 30-day line chart.

### **2. Inquiry Conversion Funnel**

```
Views â†’ Clicks â†’ Saved â†’ Inquiry â†’ Successful Contact
```

### **3. Geographic Heatmap**

Where viewers are located (region-level, no privacy violation).

### **4. Listing Health Score**

Out of 100.
Based on:

* photos quality
* description completeness
* price competitiveness
* view rate
* inquiry rate

Make it simple:

```
Commercial Land â€” 82/100 â€” Good
Modern Apartment â€” 57/100 â€” Needs Better Photos
```

---

# ðŸ”’ **5. A smarter sidebar**

Your sidebar is okay but can be futuristic with clarity cues:

* Use badges (â— for real-time messages, â˜… for subscription)
* Add hover mini-tooltips (quick metrics)
* Collapse mode for mobile responsiveness

---

# ðŸ›°ï¸ **6. Integrate the Django endpoint `/api/v1/insights/dashboard/` into the React frontend.

1. Fetch data on page load using SWR or React Query.
2. Map the returned JSON into the following components:
   - KPI cards
   - AI Insights cards
   - Recharts graphs
   - Stats bar
3. Replace the placeholder data inside the Agent Dashboard component with real API data.
4. Make sure the UI stays responsive and that loading/skeleton states are added.
5. Use the existing Tailwind + Shadcn styling system with no modifications.
6. If the API returns errors, show a user-friendly toast or alert.
7. Implement caching so insights reload instantly when the user revisits the dashboard.
8. DO NOT rewrite the whole dashboard; only replace the data source with real API results.
9. Output the final updated React component and the fetch hook.


This feature alone makes your platform feel like a **premium global product**.

---

# ðŸŒ **7. Super Admin-Level Feature (to Bind Agents Together)**

**A â€œMarketplace Healthâ€ feed for agents**

Shows trends:

* what buyers are searching for
* what price ranges are hot
* which districts are rising

Agents make more money â†’ your platform wins.

import React from "react";
import { Card, CardContent, CardHeader } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Avatar } from "@/components/ui/avatar";
import { Badge } from "@/components/ui/badge";
import { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer, CartesianGrid } from "recharts";

// -----------------------------------------------------------------------------
// AgentDashboard_FullRedesign.jsx
// Fixed: removed external lucide-react icon imports (sandbox CDN failures) and
// replaced them with local inline SVG icon components to avoid runtime build
// failures in restricted environments. Everything else preserved.
// -----------------------------------------------------------------------------

// --- Local SVG icons (small, reusable) ---
const Icon = ({ children, className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
    {children}
  </svg>
);

const HomeIcon = (props) => (
  <Icon {...props}>
    <path d="M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V10.5z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
  </Icon>
);
const UsersIcon = (props) => (
  <Icon {...props}>
    <path d="M17 21v-2a4 4 0 0 0-3-3.87" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
    <path d="M7 21v-2a4 4 0 0 1 3-3.87" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
    <path d="M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
  </Icon>
);
const EyeIcon = (props) => (
  <Icon {...props}>
    <path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
    <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
  </Icon>
);
const DollarIcon = (props) => (
  <Icon {...props}>
    <path d="M12 1v22" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
    <path d="M17 5H9.5a3 3 0 0 0 0 6H15a3 3 0 0 1 0 6H6" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
  </Icon>
);
const SparklesIcon = (props) => (
  <Icon {...props}>
    <path d="M12 3l1.5 3 3 1.5-3 1.5L12 12l-1.5-3L7 7.5 10 6 12 3z" stroke="currentColor" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
    <path d="M5 20l.8-1.6L7.6 17 6.2 15.6 5.4 14 4.6 15.6 3 17l1.6 1.4L5 20z" stroke="currentColor" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
  </Icon>
);
const MessageIcon = (props) => (
  <Icon {...props}>
    <path d="M21 15a2 2 0 0 1-2 2H8l-5 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
  </Icon>
);
const SettingsIcon = (props) => (
  <Icon {...props}>
    <path d="M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.82 2.82l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06A2 2 0 0 1 2.33 17.3l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.31-.4 1.51-1a1.65 1.65 0 0 0-.33-1.82L4.3 6.7A2 2 0 0 1 6.12 3.88l.06.06c.44.44 1.07.66 1.7.56.6-.09 1.15-.43 1.51-1V3a2 2 0 1 1 4 0v.09c.36.57.91.91 1.51 1 .63.1 1.26-.12 1.7-.56l.06-.06A2 2 0 0 1 19.7 6.12l-.06.06c-.44.44-.66 1.07-.56 1.7.09.6.43 1.15 1 1.51H21a2 2 0 0 1 0 4h-.09c-.7 0-1.31.4-1.51 1z" stroke="currentColor" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
  </Icon>
);

// -----------------------------------------------------------------------------
// Data (static placeholders)
// -----------------------------------------------------------------------------
const KPI_ITEMS = [
  { key: "listings", label: "Total Listings", value: 4, icon: HomeIcon },
  { key: "views", label: "Total Views", value: 34, icon: EyeIcon },
  { key: "inquiries", label: "Inquiries", value: 1, icon: UsersIcon },
  { key: "earnings", label: "Earnings", value: "TZS 0", icon: DollarIcon },
];

const TRAFFIC_DATA = [
  { day: "01", views: 8, inquiries: 0 },
  { day: "02", views: 12, inquiries: 1 },
  { day: "03", views: 10, inquiries: 0 },
  { day: "04", views: 18, inquiries: 1 },
  { day: "05", views: 14, inquiries: 0 },
  { day: "06", views: 20, inquiries: 2 },
  { day: "07", views: 26, inquiries: 0 },
];

const LISTINGS = [
  { id: 1, title: "Modern Downtown Apartment", views: 27, price: "TZS 0.3M" },
  { id: 2, title: "Commercial Land Plot", views: 3, price: "TZS 1.2M" },
  { id: 3, title: "Nyumba ya kupanga", views: 2, price: "TZS 0.0M" },
];

export default function AgentDashboard() {
  // lightweight helpers (placeholders for where you'd call real APIs)
  const renderKpi = (item) => {
    const IconComp = item.icon;
    return (
      <div key={item.key} className="flex-1 min-w-[12rem]">
        <Card className="hover:shadow-lg transition-shadow duration-200">
          <CardContent className="flex items-center gap-4">
            <div className="p-3 rounded-lg bg-slate-100 dark:bg-slate-800">
              <IconComp className="w-6 h-6 text-slate-700" />
            </div>
            <div className="flex-1">
              <div className="text-xs text-slate-500">{item.label}</div>
              <div className="text-2xl font-semibold mt-1">{item.value}</div>
            </div>
          </CardContent>
        </Card>
      </div>
    );
  };

  return (
    <div className="min-h-screen bg-slate-50 p-6">
      <div className="max-w-[1360px] mx-auto">
        {/* HEADER */}
        <div className="flex items-center justify-between mb-6">
          <div>
            <h1 className="text-3xl font-extrabold">Dashboard Overview</h1>
            <p className="text-sm text-slate-500 mt-1">Agent control center â€” performance, leads, and actionable AI insights.</p>
          </div>

          <div className="flex items-center gap-4">
            <div className="hidden sm:flex items-center gap-3">
              <Avatar>
                <span className="inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-50 text-blue-700">J</span>
              </Avatar>
              <div className="text-right">
                <div className="text-sm font-medium">John Agent</div>
                <div className="text-xs text-slate-500">agent1@test.com</div>
              </div>
            </div>
            <Button className="bg-blue-600 hover:bg-blue-700">+ Add Property</Button>
          </div>
        </div>

        {/* KPI BAR + AI INSIGHT */}
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6">
          <div className="lg:col-span-2 flex gap-4">
            {KPI_ITEMS.map(renderKpi)}
          </div>

          {/* AI Insights */}
          <div>
            <Card className="h-full">
              <CardHeader>
                <div className="flex items-center justify-between">
                  <div className="flex items-center gap-2">
                    <Sparkles />
                    <div>
                      <div className="text-sm font-medium">AI Assistant</div>
                      <div className="text-xs text-slate-500">Actionable tips and micro-coaching</div>
                    </div>
                  </div>
                  <Badge>Pro</Badge>
                </div>
              </CardHeader>

              <CardContent>
                <ul className="space-y-3">
                  <li className="flex items-start gap-3">
                    <div className="text-xs text-slate-600 flex-1">Boost your <strong>Modern Downtown Apartment</strong> by adding 2 high-res photos. Expected lift: <strong>+18%</strong> views.</div>
                    <Button size="sm">Apply</Button>
                  </li>

                  <li className="flex items-start gap-3">
                    <div className="text-xs text-slate-600 flex-1">Average response time is <strong>17 mins</strong>. Reply faster to convert warm leads.</div>
                    <Badge>Now</Badge>
                  </li>

                  <li className="flex items-start gap-3">
                    <div className="text-xs text-slate-600 flex-1">Top window to post: <strong>8â€“11 AM</strong>. Try scheduling posts for this period.</div>
                    <Button variant="outline" size="sm">Schedule</Button>
                  </li>
                </ul>
              </CardContent>
            </Card>
          </div>
        </div>

        {/* Charts + Listings grid */}
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6">
          <div className="lg:col-span-2">
            <Card>
              <CardHeader>
                <div className="flex items-center justify-between">
                  <div>
                    <div className="text-sm font-medium">Property Performance (7-day)</div>
                    <div className="text-xs text-slate-500">Views vs Inquiries</div>
                  </div>
                  <div className="text-xs text-slate-400">Last updated: 2m</div>
                </div>
              </CardHeader>
              <CardContent className="h-72">
                <ResponsiveContainer width="100%" height="100%">
                  <LineChart data={TRAFFIC_DATA} margin={{ top: 8, right: 20, left: -20, bottom: 0 }}>
                    <CartesianGrid strokeDasharray="3 3" />
                    <XAxis dataKey="day" />
                    <YAxis />
                    <Tooltip />
                    <Line type="monotone" dataKey="views" stroke="#6366f1" strokeWidth={3} dot={{ r: 3 }} />
                    <Line type="monotone" dataKey="inquiries" stroke="#10b981" strokeWidth={2} dot={{ r: 2 }} />
                  </LineChart>
                </ResponsiveContainer>
              </CardContent>
            </Card>
          </div>

          <div>
            <Card>
              <CardHeader>
                <div className="text-sm font-medium">Listing Health</div>
                <div className="text-xs text-slate-500">Quick overview of your top listings</div>
              </CardHeader>
              <CardContent>
                <ul className="space-y-3">
                  {LISTINGS.map((l) => (
                    <li key={l.id} className="flex items-center justify-between">
                      <div>
                        <div className="font-medium">{l.title}</div>
                        <div className="text-xs text-slate-500">{l.views} views â€¢ {l.price}</div>
                      </div>
                      <div className="text-right">
                        <div className="text-sm font-semibold">{Math.min(95, 40 + l.views * 2)}/100</div>
                        <div className="text-xs text-slate-400">Health</div>
                      </div>
                    </li>
                  ))}
                </ul>
              </CardContent>
            </Card>
          </div>
        </div>

        {/* Lower row: activity feed + quick actions */}
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-4">
          <div className="lg:col-span-2">
            <Card>
              <CardHeader>
                <div className="flex items-center justify-between">
                  <div>
                    <div className="text-sm font-medium">Recent Activity</div>
                    <div className="text-xs text-slate-500">Who viewed, who liked, who messaged</div>
                  </div>
                  <div className="text-xs text-slate-400">See all</div>
                </div>
              </CardHeader>
              <CardContent>
                <div className="space-y-4">
                  <div className="flex items-start gap-4">
                    <Avatar>
                      <span className="inline-flex items-center justify-center w-8 h-8 rounded-full bg-slate-100">A</span>
                    </Avatar>
                    <div className="flex-1">
                      <div className="text-sm"><strong>rt yui</strong> viewed <span className="font-medium">Modern Downtown Apartment</span></div>
                      <div className="text-xs text-slate-500">11/25/2025 â€¢ pending</div>
                    </div>
                    <div className="text-xs text-slate-400">27 views</div>
                  </div>

                  <div className="flex items-start gap-4">
                    <Avatar>
                      <span className="inline-flex items-center justify-center w-8 h-8 rounded-full bg-slate-100">C</span>
                    </Avatar>
                    <div className="flex-1">
                      <div className="text-sm"><strong>Commercial lead</strong> saved your listing</div>
                      <div className="text-xs text-slate-500">3 views â€¢ TZS 1.2M</div>
                    </div>
                    <div className="text-xs text-slate-400">View</div>
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>

          <div>
            <Card>
              <CardHeader>
                <div className="text-sm font-medium">Quick Actions</div>
                <div className="text-xs text-slate-500">One-tap workflows</div>
              </CardHeader>
              <CardContent>
                <div className="flex flex-col gap-3">
                  <Button className="justify-start" variant="ghost"><MessageIcon className="w-4 h-4 mr-2" /> View Messages</Button>
                  <Button className="justify-start" variant="ghost"><UsersIcon className="w-4 h-4 mr-2" /> Manage Listings</Button>
                  <Button className="justify-start" variant="ghost"><SettingsIcon className="w-4 h-4 mr-2" /> Subscription</Button>
                </div>
              </CardContent>
            </Card>
          </div>
        </div>

      </div>
    </div>
  );
}

// Small compatibility helpers exported for testing or storybook previews
export const Sparkles = (props) => <SparklesIcon {...props} />;
export const Message = (props) => <MessageIcon {...props} />;
export const Users = (props) => <UsersIcon {...props} />;
export const Settings = (props) => <SettingsIcon {...props} />;


